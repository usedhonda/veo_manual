# Frame Interpolation モード

## 概要

2つの画像（First FrameとLast Frame）の間を補完して動画を生成するモード。

**いつ使う？**
- AからBへの変化を表現したい
- モーフィング効果
- シームレスループの作成
- 確実な終点が必要な動画

---

## Frame Interpolationの仕組み

```
┌─────────────────────────────────────────────────────────────┐
│ Frame Interpolation の動作                                   │
│                                                             │
│  First Frame  ─────────────→  Last Frame                    │
│       ↓                             ↓                       │
│  開始状態を認識                終了状態を認識               │
│       ↓                             ↓                       │
│              中間フレームを生成                              │
│                     ↓                                       │
│        自然な変化・動きの動画を出力                         │
└─────────────────────────────────────────────────────────────┘
```

---

## 主な用途

### 1. モーフィング・変化

```
【例】
- 昼 → 夜への変化
- 若い顔 → 年老いた顔
- 空の状態 → 満たされた状態
- 季節の変化（春 → 夏）
```

### 2. シームレスループ

```
【例】
- 炎が燃え続けるループ
- 水面の波紋ループ
- 粒子が漂うループ
- ネオンが点滅するループ
```

### 3. 確実な動き

```
【例】
- ドアが閉じる → 開く
- 製品が現れる → 消える
- キャラがポーズA → ポーズB
```

---

## 基本的なワークフロー

```
┌─────────────────────────────────────────────────────────────┐
│ Frame Interpolation ワークフロー                             │
│                                                             │
│  1. First Frame を生成（Nano Banana Pro）                   │
│                         ↓                                   │
│  2. Last Frame を生成（同じスタイルで）                     │
│                         ↓                                   │
│  3. 両方の画像を指定                                        │
│                         ↓                                   │
│  4. 変化の方法をプロンプトで指示                            │
│                         ↓                                   │
│  5. Veo 3.1 で中間を補完                                    │
└─────────────────────────────────────────────────────────────┘
```

---

## Geminiへの依頼テンプレート

### 変化・モーフィング用

```
Veo 3.1のFrame Interpolationプロンプトを生成してください。

【First Frame】
- 内容: [開始状態の説明]
- 構図: [構図]
- ライティング: [光の状態]

【Last Frame】
- 内容: [終了状態の説明]
- 構図: [同じ構図を維持]
- ライティング: [光の変化]

【変化の指示】
- 何が変わるか: [具体的な変化]
- 変化のスピード: [gradual / rapid]
- 変化のスタイル: [smooth / sudden]

【維持すべき要素】
- [変わらない要素をリスト]

【オーディオ】
- SE: [変化に伴う音]
- BGM: [音楽]
```

### シームレスループ用

```
Veo 3.1のFrame Interpolation（ループ）プロンプトを生成

【画像】
- First Frame = Last Frame（同じ画像）
- 内容: [ループする要素]

【ループの動き】
- 何が動くか: [動く要素]
- 動きのパターン: [揺れ / 回転 / 波 / パルス]
- スピード: [slow / medium]

【一貫性】
- 背景: 完全に静止
- ライティング: 変化なし
- 主要な形状: 維持

【用途】
- 背景素材 / オーバーレイ / ループ再生
```

---

## 具体的な依頼例

### 例1: 時間経過（昼→夜）

```
昼から夜への変化動画

【First Frame】
- 都市の街並み、昼間
- 青空、明るい
- 建物に太陽光

【Last Frame】
- 同じ街並み、夜
- 暗い空、星
- 建物にネオンと窓の明かり

【変化】
- 空: 青 → オレンジ → 紫 → 暗い青 → 黒
- 建物: 明るい外観 → シルエット化 → 窓に明かり
- 変化: gradual, 8秒でフル変化

【維持】
- 建物の位置と形状
- 構図（カメラ固定）

【オーディオ】
- アンビエンス: 昼の街騒音 → 夜の静けさ
- BGM: ambient, time passing feel
```

### 例2: シームレスループ（炎）

```
炎のシームレスループ動画

【画像】
- 同じ画像をFirst/Last両方に
- 焚き火の炎、黒背景

【ループの動き】
- 炎: ゆらゆら揺れる
- 火の粉: 上に舞い上がる
- 動きのパターン: 自然な揺らぎ

【一貫性】
- 背景: 完全に黒、静止
- 炎の基本形状: 維持
- 色: オレンジ〜黄色

【技術】
- 自然にループするように
- 継ぎ目が見えないように

【オーディオ】
- SE: 火がパチパチ燃える音
- BGM: なし
```

### 例3: 製品変形

```
製品の開閉動作

【First Frame】
- ノートPCを閉じた状態
- 45度俯瞰、白背景
- 製品ロゴが見える

【Last Frame】
- 同じPC、開いた状態
- 同じアングル、白背景
- 画面が見える

【変化】
- フタがゆっくり開く
- 画面が点灯する
- 滑らかで高級感のある動き

【維持】
- 製品の位置
- ライティング
- 背景

【オーディオ】
- SE: ヒンジの微かな音、起動音
- BGM: tech, minimal
```

### 例4: 抽象モーフィング

```
抽象形状のモーフィング

【First Frame】
- 幾何学的な球体
- ネオンブルーの光
- 黒背景

【Last Frame】
- 同じ球体が立方体に変形
- ネオンピンクの光
- 黒背景

【変化】
- 形状: 球 → 立方体へスムーズに
- 色: ブルー → ピンクへグラデーション
- 表面: 滑らか → 角張る

【スタイル】
- 抽象、幾何学的
- ハイコントラスト
- サイバーパンク風

【オーディオ】
- SE: デジタルなトランスフォーム音
- BGM: electronic, ambient
```

---

## シームレスループの詳細

### 作成方法

```
【方法1】同じ画像を使用
- First Frame = Last Frame
- 自然な揺らぎや動きを指示
- 完全なループを実現

【方法2】位相が繋がる画像
- 波の同じ位相
- 回転の0度と360度
- サイクルの開始と終了
```

### 適したコンテンツ

| コンテンツ | 動きの指示 | 用途 |
|-----------|-----------|------|
| 炎 | flickering, dancing | 背景素材 |
| 水面 | rippling, gentle waves | アンビエント |
| 粒子 | floating, drifting | オーバーレイ |
| ネオン | pulsing, glowing | UI背景 |
| 雲 | slowly moving | 風景 |
| 髪 | softly waving | キャラ待機 |

---

## First/Last Frameの整合性

### 必須条件

```
【一致させる要素】
- 解像度
- アスペクト比
- 色調・色温度
- ライティング方向
- スタイル（リアル/アニメ等）

【変化させる要素】
- 意図的に変えたい部分のみ
- 明確に定義する
```

### チェックリスト

```
- [ ] 両フレームの解像度が同じ
- [ ] アスペクト比が一致
- [ ] スタイルが統一されている
- [ ] 変化する要素が明確
- [ ] 変化しない要素が一貫
```

---

## トラブルシューティング

| 問題 | 原因 | 対策 |
|------|------|------|
| 変化が不自然 | フレーム間の差が大きすぎ | より近い状態の画像を使用 |
| ループが繋がらない | 画像が完全に同じでない | 同一画像を使用 |
| 中間で歪む | スタイルの不一致 | 同じ設定で両方生成 |
| 動きが速すぎ | 変化量に対して時間が短い | durationを長くする |
| 背景が変わる | 背景固定の指示不足 | `static background`追加 |

---

## APIでの指定

### 両フレーム指定

```json
{
  "model": "veo-3.1-generate-001",
  "input": {
    "firstFrame": {
      "image": {
        "gcsUri": "gs://bucket/first.png"
      }
    },
    "lastFrame": {
      "image": {
        "gcsUri": "gs://bucket/last.png"
      }
    }
  },
  "config": {
    "aspectRatio": "16:9",
    "durationSeconds": 8
  },
  "prompt": "Smooth transition from day to night..."
}
```

---

## 次に読む

- **音声を追加したい**: `05-audio-integration.md`
- **動画を延長したい**: `../phase3-extend/01-video-extension.md`
- **背景素材を作りたい**: `../phase1-image/04-scene-backgrounds.md`
