# Veo 3.1 Video Extension Schema

## Overview

Video Extension allows extending existing Veo-generated videos beyond their initial duration.

**Important Constraint**: Only works with videos generated by Veo.

---

## API Structure

### Request Format

```json
{
  "instances": [{
    "prompt": "CONTINUATION_PROMPT",
    "video": {
      "gcsUri": "gs://bucket/path/source-video.mp4",
      "mimeType": "video/mp4"
    }
  }],
  "parameters": {
    "aspectRatio": "16:9",
    "durationSeconds": 8,
    "resolution": "720p"
  }
}
```

---

## Constraints

| Parameter | Value | Notes |
|-----------|-------|-------|
| Resolution | **720p only** | Extension does not support 1080p |
| Input Duration | Max 141 seconds | Source video cannot exceed this |
| Output Duration | 4, 6, or 8 seconds | Each extension adds this amount |
| Aspect Ratio | Must match source | 16:9 or 9:16 |
| Source Type | **Veo-generated only** | Cannot extend externally created videos |

---

## Extension Schema

```json
{
  "source_video": {
    "uri": "gs://bucket/path/source-video.mp4",
    "format": "mp4",
    "veo_generated": true
  },
  "continuation": {
    "action": "[WHAT_HAPPENS_NEXT]",
    "subject_state": "[SUBJECT_CONDITION_AT_END_OF_SOURCE]",
    "direction": "[MOVEMENT_CONTINUATION]",
    "timing": "[ACTION_TIMING_IN_EXTENSION]"
  },
  "consistency": {
    "maintain": [
      "character appearance",
      "lighting conditions",
      "color palette",
      "camera style",
      "scene environment"
    ],
    "evolve": "[WHAT_CHANGES_NATURALLY]"
  },
  "shot": {
    "continuation": "[SAME | NEW_SHOT_TYPE]",
    "movement": "[CONTINUE_MOTION | NEW_MOTION]"
  },
  "audio": {
    "dialogue": "[CONTINUED_OR_NEW_DIALOGUE]",
    "sfx": "[SFX: appropriate sounds]",
    "ambience": "[Ambience: consistent with source]",
    "music": "[Music: continue mood OR new]"
  },
  "negative": {
    "exclude": [
      "discontinuity",
      "jump cut feel",
      "character change",
      "lighting change",
      "style shift"
    ]
  },
  "meta": {
    "duration": 8,
    "resolution": "720p",
    "aspect_ratio": "16:9"
  }
}
```

---

## Extension Strategies

### Strategy 1: Direct Continuation

Continue the same action seamlessly.

```json
{
  "continuation": {
    "type": "direct",
    "description": "Action continues exactly as started",
    "example": "Character continues walking in same direction"
  },
  "prompt_pattern": "The [subject] continues to [action], maintaining the same [movement/direction/pace]"
}
```

### Strategy 2: Action Completion

Complete an action that was started.

```json
{
  "continuation": {
    "type": "completion",
    "description": "Started action reaches its conclusion",
    "example": "Character who was reaching for door now opens it and enters"
  },
  "prompt_pattern": "The [subject] completes the action, [specific completion description]"
}
```

### Strategy 3: New Beat

Transition to a new action while maintaining consistency.

```json
{
  "continuation": {
    "type": "new_beat",
    "description": "Natural transition to related action",
    "example": "Character stops walking and turns to face camera"
  },
  "prompt_pattern": "The [subject] then [new action], transitioning smoothly from the previous motion"
}
```

### Strategy 4: Camera Continuation

Keep subject stable, continue camera motion.

```json
{
  "continuation": {
    "type": "camera_continuation",
    "description": "Subject remains, camera continues moving",
    "example": "Orbit continues around subject"
  },
  "prompt_pattern": "Camera continues [movement type] around the [subject] who [action/state]"
}
```

---

## Best Practices

### 1. Reference the Source Video

```json
"prompt": "Continuing from the previous clip: The detective continues walking down the alley, his coat billowing in the wind, maintaining the same pace and direction"
```

### 2. Describe End State of Source

Tell the model what state to expect:

```json
"continuation": {
  "subject_state": "Character is mid-stride, facing right, in urban alley",
  "action": "continues walking, then stops and turns toward a sound"
}
```

### 3. Maintain Visual Consistency

Always include consistency requirements:

```json
"consistency": {
  "maintain": [
    "Character: same clothing, hair, appearance",
    "Scene: same alley, same lighting (night, neon)",
    "Camera: same lens, same height",
    "Color: same teal/orange grade"
  ]
}
```

### 4. Handle Transitions Carefully

For new beats, describe the transition:

```json
"continuation": {
  "transition": "After two seconds of continued walking, character slows and stops",
  "new_action": "Character turns toward camera, expression changing to surprise"
}
```

---

## Common Patterns

### Walking Scene Extension

```json
{
  "source": "Character walking through city",
  "continuation": {
    "action": "continues walking, passes storefronts",
    "additional": "glances at reflection in window, continues"
  },
  "consistency": {
    "maintain": ["gait", "clothing", "city environment", "lighting"]
  }
}
```

### Dialogue Scene Extension

```json
{
  "source": "Character speaking to camera",
  "continuation": {
    "action": "continues speaking",
    "dialogue": "Character continues: \"And that's why we need to act now.\""
  },
  "consistency": {
    "maintain": ["pose", "expression range", "background", "audio quality"]
  }
}
```

### Action Scene Extension

```json
{
  "source": "Character running, approaching obstacle",
  "continuation": {
    "action": "leaps over obstacle, lands, continues running",
    "timing": "0-2s leap, 2-4s landing, 4-8s continued run"
  },
  "consistency": {
    "maintain": ["speed", "urgency", "camera tracking style"]
  }
}
```

### Product Shot Extension

```json
{
  "source": "Product rotating on turntable",
  "continuation": {
    "action": "rotation continues to show back and side angles",
    "secondary": "light continues to sweep across surface"
  },
  "consistency": {
    "maintain": ["rotation speed", "lighting setup", "background"]
  }
}
```

---

## Multi-Extension Workflow

For videos longer than 16 seconds, chain multiple extensions:

```
Source (8s) → Extension 1 (8s) → Extension 2 (8s) → Extension 3 (8s)
Result: 32 second video
```

### Chaining Rules

1. Each extension uses the output of the previous extension
2. Maximum input: 141 seconds (can extend up to ~149s total)
3. Plan the full sequence before starting
4. Maintain consistency notes throughout chain

### Chaining Prompt Pattern

```json
{
  "extension_1": {
    "note": "Based on original 8s clip",
    "continuation": "Character continues walking, approaches corner"
  },
  "extension_2": {
    "note": "Based on 16s output",
    "continuation": "Character rounds corner, reveals new street"
  },
  "extension_3": {
    "note": "Based on 24s output",
    "continuation": "Character stops, looks up at building"
  }
}
```

---

## Negative Prompts for Extension

Always include to prevent common issues:

```json
"negativePrompt": "discontinuity, jump cut, sudden change, character morph, lighting shift, costume change, style change, position jump, timeline inconsistency"
```

---

## Troubleshooting

### Problem: Character Appearance Changes

**Solution**: Re-state character details in prompt:
```
"The detective (trench coat, fedora, stubbled jaw) continues..."
```

### Problem: Lighting Inconsistency

**Solution**: Specify lighting:
```
"...maintaining the neon-lit night atmosphere with blue and pink reflections"
```

### Problem: Jarring Transition

**Solution**: Describe the transition smoothly:
```
"Seamlessly continuing the motion, character..."
```

### Problem: Camera Style Changes

**Solution**: Specify camera:
```
"Camera continues the handheld tracking shot at eye level..."
```
